<<influxdb2.x User Manual>>

[Client CMD]

1. 로그인 org 변경

influx config set --active --config-name ntek-config

2. 백업데이터 중에 특정 버킷만 복원
*** 주의  : 전체 복원 시에는 Auth 까지 모두 복원되어 로그인이 불가능해짐(토큰 변경) ***
*** org 가 다른 경우 client shell에서 같이 볼 수 없으면 해당 버킷에 가야만 볼수 있음. org 간의 데이터 이동 불가 ***

influx restore <backup path> --bucket <bucket Name> -t <YourAuthToken>

InfluxDB_backup_2025-02-13_20-58-48

3. Auth 목록 확인
influx auth list

4. bucket 목록 확인
influx bucket list



[Client Shell]
show databases : 버킷 목록보기
show measurements : measurement(테이블) 목록 보기
show tag keys : 모든 measurement의 모든 tag key 목록 보기
show field keys : 모든 measurement의 모든 field key 목록 보기
show series : 모든 measurement의 서로소인 tag key 튜플의 목록 보기
use bucketName : 사용할 버킷 지정


insert temperature,location=office,room=1 value=23.5 : 데이터입력 
 Syntax >> insert [measurement이름],[태그키=태그값,...] [필드키=필드값] 
 Tag Key/Tag Value : String
 Field Key : String 
select * from temperature : 데이터 조회
select * from temperature where "location"='office' : 조건절 추가 시 문자열 ''로 감싸야 함. 태그는 태그 키를 " "로 감싸야 함
delete from temperature where "location"='office' : 삭제, 수정불가 삭제 후 다시 추가

[measurement 내보내기]

1. C:\Users\ntek 경로에 query.flux 파일 생성후 다음 내용 저장
from(bucket: "ssdb")
  |> range(start: -1y)
  |> filter(fn: (r) => r._measurement == "trend_31a14bad-55d4-4bec-9bad-10b374e722ed")
  |> yield(name: "export")

2. influxdb cli 경로의 CMD 창에서 아래 명령어 실행

influx query --file C:\Users\사용자이름\query.flux --raw > C:\Users\사용자이름\export.json

influx query 'import "influxdata/influxdb/schema" schema.fields(bucket: "ssdbnoretention", measurement: "ep_31a14bad-55d4-4bec-9bad-10b374e722ed")'


